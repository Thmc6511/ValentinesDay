<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quick Verification</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#1b0f2a;
      --card: rgba(255,255,255,0.08);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.70);
      --accent: #ff5fa2;
      --shadow: 0 20px 70px rgba(0,0,0,0.45);
      --radius: 22px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color:var(--text); }
    body{
      background:
        radial-gradient(1100px 700px at 20% 20%, rgba(255,95,162,0.14), transparent 55%),
        radial-gradient(900px 600px at 80% 30%, rgba(255,209,227,0.10), transparent 60%),
        radial-gradient(1100px 900px at 50% 90%, rgba(135,84,255,0.10), transparent 55%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      overflow:hidden;
    }

    .wrap{ width:min(980px, 100%); position:relative; }

    .panel{
      background: linear-gradient(180deg, var(--card), rgba(255,255,255,0.06));
      border: 1px solid rgba(255,255,255,0.14);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:18px 20px;
      background: rgba(255,255,255,0.06);
      border-bottom: 1px solid rgba(255,255,255,0.10);
    }
    .brand{ display:flex; gap:10px; align-items:center; letter-spacing:0.2px; font-weight:700; }
    .dot{
      width:12px; height:12px; border-radius:99px;
      background: radial-gradient(circle at 30% 30%, #fff, var(--accent));
      box-shadow: 0 0 14px rgba(255,95,162,0.55);
    }
    .hint{ font-size:13px; color:var(--muted); }

    .content{ padding:22px; }

    /* CAPTCHA */
    #captchaScreen{ display:block; animation: fadeIn 480ms ease-out; }
    .title{ font-size:22px; margin:0 0 6px 0; }
    .subtitle{ margin:0 0 18px 0; color:var(--muted); line-height:1.35; }

    .captchaCard{
      display:grid;
      grid-template-columns: 1.2fr 1fr;
      gap:18px;
      align-items:stretch;
    }
    @media (max-width: 860px){ .captchaCard{ grid-template-columns:1fr; } }

    .prompt{
      background: linear-gradient(180deg, rgba(255,255,255,0.07), rgba(255,255,255,0.05));
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 18px;
      padding:18px;
      position:relative;
      overflow:hidden;
    }

    .prompt h2{ margin:0 0 10px 0; font-size:18px; }

    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:12.5px;
      padding:8px 10px;
      border-radius:999px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.10);
      color:var(--muted);
      margin-bottom:12px;
    }
    .chip span{
      width:8px; height:8px; border-radius:99px;
      background: var(--accent);
      box-shadow:0 0 12px rgba(255,95,162,0.55);
    }

    .statusRow{ display:flex; gap:10px; align-items:center; margin-top:12px; }
    .meter{
      flex:1; height:10px; border-radius:999px;
      background: rgba(255,255,255,0.08);
      border:1px solid rgba(255,255,255,0.10);
      overflow:hidden;
    }
    .meter > div{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, var(--accent), #ffcfdd);
      transition: width 220ms ease;
    }
    .statusText{ font-size:12.5px; color:var(--muted); min-width: 200px; text-align:right; }

    .gridWrap{
      background: rgba(0,0,0,0.18);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 18px;
      padding:14px;
      position:relative;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }

    .tile{
      position:relative;
      border-radius: 14px;
      overflow:hidden;
      cursor:pointer;
      aspect-ratio: 1 / 1;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.06);
      transform: translateZ(0);
      user-select:none;
    }

    .tile img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      filter: saturate(1.05) contrast(1.02);
      transform: scale(1.02);
      transition: transform 220ms ease, filter 220ms ease;
    }
    .tile:hover img{ transform: scale(1.06); filter: saturate(1.12) contrast(1.06); }

    .tile .check{
      position:absolute;
      inset:0;
      display:flex;
      align-items:flex-start;
      justify-content:flex-end;
      padding:10px;
      pointer-events:none;
      opacity:0;
      transition: opacity 160ms ease;
    }

    .badge{
      width:30px; height:30px;
      border-radius:999px;
      background: rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.20);
      display:flex;
      align-items:center;
      justify-content:center;
      backdrop-filter: blur(6px);
      box-shadow: 0 10px 24px rgba(0,0,0,0.25);
    }

    .badge svg{
      width:18px; height:18px;
      fill:none;
      stroke: #fff;
      stroke-width: 2.6;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    .tile.selected{
      outline: 3px solid rgba(255,95,162,0.55);
      box-shadow: 0 0 0 6px rgba(255,95,162,0.12);
    }
    .tile.selected .check{ opacity:1; }

    .actions{ display:flex; gap:10px; margin-top:14px; justify-content:flex-end; flex-wrap:wrap; }

    button{
      border:none;
      cursor:pointer;
      padding:12px 14px;
      border-radius: 14px;
      font-weight:700;
      letter-spacing:0.2px;
      transition: transform 120ms ease, filter 120ms ease, opacity 120ms ease;
    }
    button:active{ transform: translateY(1px); }

    .btnGhost{
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.14);
      color: var(--text);
    }
    .btnPrimary{
      background: linear-gradient(90deg, var(--accent), #ff88bb);
      color: #1b0f2a;
      box-shadow: 0 18px 42px rgba(255,95,162,0.25);
    }
    .btnPrimary:disabled{
      opacity:0.45;
      cursor:not-allowed;
      filter:saturate(0.6);
      box-shadow:none;
    }

    .shake{ animation: shake 420ms ease-in-out; }
    @keyframes shake{
      0%,100%{ transform: translateX(0); }
      15%{ transform: translateX(-10px); }
      30%{ transform: translateX(8px); }
      45%{ transform: translateX(-6px); }
      60%{ transform: translateX(5px); }
      75%{ transform: translateX(-3px); }
    }

    /* VALENTINE */
    #valentineScreen{ display:none; animation: fadeIn 520ms ease-out; }

    .valentineHero{
      position:relative;
      overflow:hidden;
      border-radius: var(--radius);
      padding:28px;
      background:
        radial-gradient(700px 420px at 25% 25%, rgba(255,95,162,0.22), transparent 60%),
        radial-gradient(700px 420px at 75% 35%, rgba(255,209,227,0.16), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.05));
      border: 1px solid rgba(255,255,255,0.14);
      box-shadow: var(--shadow);
    }

    .flowerField{
      position:absolute;
      inset:-40px;
      pointer-events:none;
      opacity:0.85;
    }
    .flower{
      position:absolute;
      font-size: 26px;
      animation: floaty 7s ease-in-out infinite;
      opacity:0.95;
    }
    .flower.small{ font-size: 20px; opacity:0.9; }
    .flower.big{ font-size: 34px; opacity:0.95; }
    @keyframes floaty{
      0%,100%{ transform: translateY(0px) rotate(0deg); }
      50%{ transform: translateY(-14px) rotate(2deg); }
    }

    .cardNote{
      position:relative;
      display:grid;
      grid-template-columns: 1fr;
      gap:16px;
      max-width: 760px;
      margin: 0 auto;
      text-align:center;
    }

    .heart{
      width: 56px; height: 56px; margin: 0 auto;
      border-radius: 18px;
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.16);
      display:flex; align-items:center; justify-content:center;
      box-shadow: 0 16px 40px rgba(0,0,0,0.20);
      backdrop-filter: blur(10px);
    }

    .headline{
      font-size: clamp(28px, 4vw, 44px);
      margin: 6px 0 0 0;
      letter-spacing:0.2px;
    }

    .subhead{
      color: var(--muted);
      margin: 0 auto;
      max-width: 54ch;
      line-height:1.45;
      font-size: 15.5px;
    }

    .noteBox{
      margin-top: 10px;
      text-align:left;
      background: rgba(0,0,0,0.16);
      border: 1px solid rgba(255,255,255,0.14);
      border-radius: 18px;
      padding: 18px 18px;
      backdrop-filter: blur(10px);
      box-shadow: 0 20px 55px rgba(0,0,0,0.25);
    }
    .noteBox p{
      margin: 0;
      color: rgba(255,255,255,0.88);
      line-height:1.6;
      font-size: 16px;
      white-space: pre-wrap;
    }

    .tinyRow{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:10px; }
    .tiny{
      font-size:12.5px;
      color: rgba(255,255,255,0.70);
      background: rgba(255,255,255,0.07);
      border: 1px solid rgba(255,255,255,0.12);
      padding: 8px 10px;
      border-radius: 999px;
    }

    @keyframes fadeIn{
      from{ opacity:0; transform: translateY(10px); }
      to{ opacity:1; transform: translateY(0px); }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <div class="topbar">
        <div class="brand"><span class="dot"></span> Verification Portal</div>
        <div class="hint">secure ‚Ä¢ totally real ‚Ä¢ definitely not romantic</div>
      </div>

      <div class="content">
        <!-- CAPTCHA SCREEN -->
        <section id="captchaScreen">
          <h1 class="title">One quick thing‚Ä¶</h1>
          <p class="subtitle">
            Please complete the verification below. It‚Äôs important. (for science.)
          </p>

          <div class="captchaCard" id="captchaCard">
            <div class="prompt">
              <div class="chip"><span></span> Human Verification</div>
              <h2 id="promptText">Select all images</h2>

              <div class="subtitle" style="margin:0;">
                Click every tile. When you‚Äôve selected <strong>all 9</strong>, press <strong>Verify</strong>.
              </div>

              <div class="statusRow">
                <div class="meter" aria-label="progress meter">
                  <div id="meterFill"></div>
                </div>
                <div class="statusText" id="statusText">0 / 9 selected</div>
              </div>

              <div class="actions">
                <button class="btnGhost" id="resetBtn" type="button">Reset</button>
                <button class="btnPrimary" id="verifyBtn" type="button" disabled>Verify</button>
              </div>

              <div style="margin-top:10px; font-size:12.5px; color:rgba(255,255,255,0.62);" id="microHint">
                Tip: if you fail, the system gets dramatic.
              </div>
            </div>

            <div class="gridWrap">
              <div class="grid" id="grid"></div>
            </div>
          </div>
        </section>

        <!-- VALENTINE SCREEN -->
        <section id="valentineScreen">
          <div class="valentineHero">
            <div class="flowerField" id="flowerField"></div>

            <div class="cardNote">
              <div class="heart" aria-hidden="true">
                <span style="font-size:26px;">üíó</span>
              </div>

              <h1 class="headline">Happy Valentine‚Äôs Day</h1>
              <p class="subhead">
                Congratulations. You passed the world‚Äôs most important verification.
              </p>

              <div class="noteBox">
                <p id="noteText">Hey love,
I just wanted you to know how much I appreciate you.
Thank you for being you. You make my days better in a way I can‚Äôt really explain, 
and I cannot even begin to describe how easy it is to love you. And, truly, falling for you 
is the greatest gift I have ever received.

Happy Valentine‚Äôs Day ‚ù§Ô∏è
‚Äî Miguel</p>
              </div>

              <div class="tinyRow">
                <div class="tiny">üåπ roses loaded</div>
                <div class="tiny">‚ú® aesthetic mode: on</div>
                <div class="tiny">üíå note: certified</div>
              </div>

              <div style="margin-top:8px; font-size:12.5px; color:rgba(255,255,255,0.62);">
                (Optional: add a playlist link or a photo here later.)
              </div>
            </div>
          </div>
        </section>

      </div>
    </div>
  </div>

  <script>
    // -----------------------------
    // IMPORTANT:
    // Your images are in the REPO ROOT.
    // Filenames must match EXACTLY (capital letters matter).
    // -----------------------------
    const tiles = [
      { src: "IMG_0070.JPG" },
      { src: "IMG_0195.JPG" },
      { src: "IMG_0677.jpeg" },
      { src: "IMG_1329.jpeg" },
      { src: "IMG_2294.JPG" },
      { src: "IMG_2348.JPG" },
      { src: "IMG_2861.jpeg" },
      { src: "IMG_2921.JPG" },
      { src: "IMG_3058.JPG" },
    ];

    const grid = document.getElementById("grid");
    const verifyBtn = document.getElementById("verifyBtn");
    const resetBtn = document.getElementById("resetBtn");
    const statusText = document.getElementById("statusText");
    const meterFill = document.getElementById("meterFill");
    const captchaCard = document.getElementById("captchaCard");
    const microHint = document.getElementById("microHint");

    const captchaScreen = document.getElementById("captchaScreen");
    const valentineScreen = document.getElementById("valentineScreen");
    const flowerField = document.getElementById("flowerField");

    const failLines = [
      "You missed one. Try again, Kiki.",
      "Not quite‚Ä¶ select ALL of them please, pebble. üòà",
      "System says: ‚ÄòNice try.‚Äô Try again üíó",
      "Close! But the portal demands perfection.",
      "Okay wait‚Ä¶ how did you miss THAT one üò≠ Resetting.",
      "Nope. The verification goblin is unsatisfied.",
      "Almost! (not really Katie) Try again ü§≠"
    ];

    function shuffle(arr){
      const a = [...arr];
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    let shuffled = shuffle(tiles);
    let selected = new Set();

    function render(){
      grid.innerHTML = "";
      shuffled.forEach((t, idx) => {
        const tile = document.createElement("div");
        tile.className = "tile";
        tile.setAttribute("role","button");
        tile.setAttribute("tabindex","0");
        tile.setAttribute("aria-label", "image tile");

        const img = document.createElement("img");
        img.src = t.src;
        img.alt = "tile image";

        const check = document.createElement("div");
        check.className = "check";
        check.innerHTML = `
          <div class="badge" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path d="M20 6L9 17l-5-5"></path>
            </svg>
          </div>
        `;

        tile.appendChild(img);
        tile.appendChild(check);

        const applySelectedStyle = () => {
          if(selected.has(idx)) tile.classList.add("selected");
          else tile.classList.remove("selected");
        };
        applySelectedStyle();

        const toggle = () => {
          if(selected.has(idx)) selected.delete(idx);
          else selected.add(idx);
          applySelectedStyle();
          updateStatus();
        };

        tile.addEventListener("click", toggle);
        tile.addEventListener("keydown", (e) => {
          if(e.key === "Enter" || e.key === " "){
            e.preventDefault();
            toggle();
          }
        });

        grid.appendChild(tile);
      });

      updateStatus();
    }

    function updateStatus(){
      const count = selected.size;
      const total = shuffled.length;

      statusText.textContent = `${count} / ${total} selected`;

      const pct = Math.round((count/total)*100);
      meterFill.style.width = `${pct}%`;

      // Verify only enabled when ALL are selected
      verifyBtn.disabled = (count !== total);

      // little playful hint
      if (count === 0) microHint.textContent = "Tip: if you fail, the system gets dramatic.";
      else if (count < total) microHint.textContent = "Keep going‚Ä¶ you‚Äôre almost certified üòå";
      else microHint.textContent = "Perfect. Now press Verify üíó";
    }

    function resetAll(){
      selected = new Set();
      shuffled = shuffle(tiles);
      render();
    }

    function failAnimation(customMsg){
      const msg = customMsg || failLines[Math.floor(Math.random()*failLines.length)];
      statusText.textContent = msg;

      captchaCard.classList.remove("shake");
      void captchaCard.offsetWidth;
      captchaCard.classList.add("shake");

      setTimeout(() => { resetAll(); }, 700);
    }

    function verify(){
      // She must select ALL tiles
      if (selected.size !== shuffled.length){
        failAnimation();
        return;
      }

      // Success
      captchaScreen.style.display = "none";
      valentineScreen.style.display = "block";
      makeFlowers();
      document.title = "Happy Valentine's Day üíó";
    }

    resetBtn.addEventListener("click", resetAll);
    verifyBtn.addEventListener("click", verify);

    function makeFlowers(){
      const emojis = ["üå∏","üå∑","üåπ","üíê","üå∫","üåº","ü™ª"];
      flowerField.innerHTML = "";
      const count = 26;

      for(let i=0;i<count;i++){
        const s = document.createElement("div");
        const e = emojis[Math.floor(Math.random()*emojis.length)];
        s.className = "flower";
        if(i % 7 === 0) s.classList.add("big");
        if(i % 5 === 0) s.classList.add("small");
        s.textContent = e;

        const left = Math.random()*100;
        const top = Math.random()*100;
        const dur = 5 + Math.random()*6;
        const delay = Math.random()*2.5;

        s.style.left = left + "%";
        s.style.top = top + "%";
        s.style.animationDuration = dur + "s";
        s.style.animationDelay = (-delay) + "s";

        flowerField.appendChild(s);
      }
    }

    render();
  </script>
</body>
</html>
